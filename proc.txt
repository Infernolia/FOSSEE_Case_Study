delimiter //
mysql> create procedure p2(min INT, max INT)
     BEGIN
     DECLARE v_finished integer default 0;
     DECLARE va INT;
     DECLARE curl CURSOR FOR SELECT id from t1 where id between min AND max;
     DECLARE CONTINUE HANDLER FOR NOT FOUND SET v_finished=1;
     OPEN curl;
     read_loop: LOOP
     FETCH curl INTO va;
     IF v_finished=1 THEN
     LEAVE read_loop;
     END IF;
     insert into t1 values(va,'new');
     END LOOP;
     close curl;
     END;
     //